<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>{{ title }} </title>
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='admin_main.css') }}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='main.css') }}">
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.7/angular.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.7/angular-resource.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.7/angular-route.js"></script>
<script src="{{ url_for('static', filename='script.js') }}"></script>


<style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>
  <style type="text/css">/* Chart.js */
@-webkit-keyframes chartjs-render-animation{from{opacity:0.99}to{opacity:1}}@keyframes chartjs-render-animation{from{opacity:0.99}to{opacity:1}}.chartjs-render-monitor{-webkit-animation:chartjs-render-animation 0.001s;animation:chartjs-render-animation 0.001s;}</style>
<body>

<div class="container">
  <header class="blog-header py-3">
    <div class="row flex-nowrap justify-content-between align-items-center">
      <div class="col-4 pt-1">
        <a class="text-muted" href="/">{{ _('home') }}</a>
        <a class="text-muted" href="/admin/page">{{ _('admin') }}</a>     
      </div>
      <div class="col-4 text-center" style="margin-right: auto;">
        <a class="blog-header-logo text-dark" href="/">Foxlee-shop</a>
      </div>
    </div>
  </header> 
  <div class="row">
    <nav class="col-md-2 d-none d-md-block bg-light sidebar" style="margin-top: 50px;">
      <div class="sidebar-sticky">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link" href={{ url_for('admin.admin_category',category="orders") }}>
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline></svg>
              Orders
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href={{ url_for('admin.admin_category',category="products") }}>
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-shopping-cart"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
              Products
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href={{ url_for('admin.admin_category',category="customers") }}>
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-users"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
              Customers
            </a>
          </li>
        </ul>
      </div>
    </nav>

    <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4"><div class="chartjs-size-monitor" style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;"><div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div></div><div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div></div>
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
      </div>

	<div>
<p></p>
<p></p>
<p></p>

{% if title=="page": %}
  <section class="jumbotron text-center" id="div1" style="height:650px;">
        <div class="container" ng-app="work" ng-controller="WorkCtrl">
            <h1>Management</h1>
            <div class="line"></div>
            <p></p>
            <button class="btn btn-outline-primary" ng-click="statusFilter={}"> 전체 </button>
            <button class="btn btn-outline-primary" ng-click="statusFilter={title:'Delivery'}"> 배송</button>         <!-- title:'Shoppingmall' - js 에서 그대로 문자열 넣어야함-->
            <button class="btn btn-outline-primary" ng-click="statusFilter={title:'Products'}"> 상품 </button>

            <p></p>
            <ui class='list-unstyled' ng-repeat="work in worktodo | filter:statusFilter">
                <div class="input-group">
                  <div class="input-group-prepend">

                    <span class="input-group-text">Memo</span>
                  </div>
                  <input type="text" ng-model="work.title" aria-label="Work" class="form-control">
                  <input type="text" ng-model="work.job" aria-label="Work" class="form-control">
                  <button class="btn btn-outline-danger" type="button" ng-click="remove(work)">삭제</button>

                </div>
                <p></p>
                <p>기타사항</p>

            </ui>

            <form name="projectForm" ng-submit="add(title, job)">
               <div class="input-group">
                      <div class="input-group-prepend">
                        <span class="input-group-text">New work</span>
                      </div>
                      <input type="text" ng-model="title" aria-label="Project name" class="form-control" placeholder="Tag" ng-minlength="3">
                      <input type="text" ng-model="job" aria-label="Project name" class="form-control" placeholder="Work to do" ng-minlength="3">
                      <button class="btn btn-outline-success" type="submit">추가</button>

               </div>
                <div ng-show="projectForm.$pristine">
                        <div> 빈칸을채워주세요. </div>
                </div>
                <div ng-show="projectForm.$valid-ng-minlength && projectForm.$dirty">
                        <div class="spinner-border text-success" role="status">
                          <span class="sr-only">Loading...</span>
                        </div>
                </div>
                <div ng-show="projectForm.$dirty && projectForm.$invalid">
                        <div class="spinner-border text-danger" role="status">
                          <span class="sr-only">Loading...</span>
                        </div>
                </div>
            </form>


        </div>
   </section>











{% elif title=="orders": %}
<span class="member__input-group member__input-group--icon-label">
<h3><image src="../static/images/msg.png"></image>주문 목록</h3>
</span>
    <table class="table table-striped table-sm">
        <thead>
          <tr>
          <th>주문  번호</th>
          <th>구매자 이메일</th>
          <th>구매 시각</th>
          </tr>
        </thead>
        <tbody>
        {% for i in range(n) %}
          <tr>
          <td>{{ orders_list[i][0] }}</td>
          <td>{{ orders_list[i][1] }}</td>
          <td>{{ orders_list[i][2] }}</td>
          </tr>
          {% endfor %}
          </tbody>


{% elif title=="customers": %}
<p></p>
<span class="member__input-group member__input-group--icon-label">
 <h3> <image width="60px" height="60px" src="../static/images/people.png"></image>회원수: {{ user_count }} </h3>
</span>
<p></p>
<span class="member__input-group member__input-group--icon-label">
 <h3> <image width="25px" height="25px" src="../static/images/ios-refresh.svg"></image>접속중</h3>
    <div style="margin-left:100px;"> {% for i in range(m) %} <h4> {{ i+1 }} 번째 IP :  {{ ip_list[i] }}</h4>   {% endfor %}</div>
</span>
{% elif title=="products": %}
<p></p>
Top 3 
<p></p>
{{ p[0] }}
<p></p>
{{ p[1] }}
<p></p>
{{ p[2] }}
<p></p>
상품수: {{product_count }}
<p></p>
<div class="one-graph"></div>
<p> </p>

<script src="https://d3js.org/d3.v4.min.js"></script>
<script>

var w = 400, h = 400;
var dataName = {{ y[0]|tojson|safe }};
var graphData = {{ y[1] }};
var colorData = ["#FD2F56", "#F1E7DE", "#343F3A", "#5ED1D4", "#FFC001"];
var pie = d3.pie();
var arc = d3.arc().innerRadius(70).outerRadius(200);

    // 그래프 사이즈
var svg = d3.select(".one-graph")
    .append("svg")
    .attr("width", w)
    .attr("height", h)
    .attr("id", "graphWrap");

    // 데이터, 그래프 설정
var g = svg.selectAll(".pie")
    .data(pie(graphData))
    .enter()
    .append("g")
    .attr("class", "pie")
    .attr("transform","translate("+w/2+","+h/2+")");

    // fill  채우기, 색깔
g.append("path")
    .style("fill", function(d, i) {
        return colorData[i];
    })
    // 36~49  애니메이션
    .transition()
    .duration(400)
    .delay(function(d, i) {
        return i * 400;
    })
    .attrTween("d", function(d, i) {
        var interpolate = d3.interpolate(
            {startAngle : d.startAngle, endAngle : d.startAngle},
            {startAngle : d.startAngle, endAngle : d.endAngle}
        );
        return function(t){
            return arc(interpolate(t));
        }
    });

g.append("text")
    .attr("transform", function(d) { return "translate(" + arc.centroid(d) + ")"; })
    .attr("dy", ".35em")
    .style("text-anchor", "middle")
    .text(function(d, i) {
        return  d.endAngle-d.startAngle > 0.2 ?
                dataName[i] + " (" + Math.round(1000*(d.endAngle-d.startAngle)/(Math.PI*2))/10 + "%)" : ""
    });

svg.append("text")
    .attr("class", "total")
    .attr("transform", "translate("+(w/2-35)+", "+(h/2+5)+")")
    .text("test : " + d3.sum(graphData));


</script>
{% else %}
{% endif %}
       </main>
</div>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="/docs/4.3/assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
<!--<script src="/docs/4.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o" crossorigin="anonymous"></script>-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.9.0/feather.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>
<!--<script src="dashboard.js"></script>-->
</div>
</body>
</html>
